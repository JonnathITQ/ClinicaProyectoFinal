<button class="paciente-cerrar-sesion-btn" (click)="cerrarSesion()">
  Cerrar Sesión
</button>
<div class="paciente-main-container">
  <h1 class="paciente-bienvenida">
    Te damos la bienvenida, {{ usuario.nombre }}
  </h1>

  <!-- Fase 1: Selección de servicio -->
  <div *ngIf="fase === 1" class="paciente-paso">
    <h2>Paso 1: Selecciona el servicio que necesitas</h2>
    <div class="paciente-servicios-grid">
      <div 
        *ngFor="let servicio of servicios" 
        class="paciente-servicio-card"
        [ngClass]="{ 'seleccionado': servicioSeleccionado === servicio.id_servicio }"
        (click)="seleccionarServicio(servicio.id_servicio)">
        <h3>{{ servicio.nombre }}</h3>
        <p>{{ servicio.descripcion }}</p>
        <span class="paciente-servicio-precio">${{ servicio.precio }}</span>
      </div>
    </div>
    <div *ngIf="servicioSeleccionado" class="paciente-paso-siguiente">
      <button class="paciente-btn-siguiente" (click)="irASiguientePaso()">Siguiente</button>
    </div>
    <div *ngIf="!servicioSeleccionado" class="paciente-aviso">
      <span>Debes seleccionar un servicio para continuar.</span>
    </div>
  </div>

  <!-- Fase 2: Selección de cita -->
  <div *ngIf="fase === 2" class="paciente-citas-disponibles">
    <h2>Paso 2: Selecciona una cita disponible</h2>
    <div class="paciente-citas-grid">
      <div *ngFor="let cita of citasDisponibles" class="paciente-cita-card">
      <span>
        Doctor: {{ cita.doctor?.nombre }} {{ cita.doctor?.apellido }}<br>
        Fecha: {{ cita.fecha_cita }}<br>
        Hora: {{ cita.hora_inicio }} a {{ cita.hora_fin }}
      </span>
      <button class="paciente-cita-btn" (click)="reservarCita(cita._id)">Reservar</button>
    </div>
    </div>
    <div *ngIf="citasDisponibles.length === 0" class="paciente-aviso">
      <span>No hay citas disponibles en los próximos 5 días.</span>
    </div>
  </div>
</div>
